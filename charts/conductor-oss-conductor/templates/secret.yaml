apiVersion: v1
kind: Secret
metadata:
  name: {{ include "conductor-oss-conductor.fullname" . }}
  labels:
    {{- include "conductor-oss-conductor.labels" . | nindent 4 }}
  {{- with (include "conductor-oss-conductor.annotations" .) }}
  annotations:
    {{- . | nindent 4 }}
  {{- end }}
type: Opaque
data:
  {{- if or (hasPrefix "redis" .Values.db.type) (hasPrefix "redis" .Values.queue.type) (eq .Values.workflowExecutionLock.type "redis") }}
  redis-password: {{ .Values.redis.password | b64enc | quote }}
  {{- end }}
  {{- if eq .Values.indexing.type "elasticsearch" }}
  elasticsearch-password: {{ .Values.elasticsearch.password | b64enc | quote }}
  {{- end }}
  {{- if eq .Values.db.type "mysql" }}
  mysql-password: {{ .Values.mysql.password | b64enc | quote }}
  {{- end }}
  {{- if or (eq .Values.db.type "postgres") (eq .Values.workflowExecutionLock.type "postgres") (eq .Values.indexing.type "postgres") (and .Values.externalPayloadStorage.type (eq .Values.externalPayloadStorage.type "postgres")) }}
  postgres-password: {{ .Values.postgres.password | b64enc | quote }}
  {{- end }}
  {{- if eq .Values.indexing.type "opensearch" }}
  opensearch-password: {{ .Values.opensearch.password | b64enc | quote }}
  {{- end }}
  {{- if .Values.amqpEventQueues.enabled }}
  amqp-password: {{ .Values.amqpEventQueues.password | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.enabled }}
  {{- if .Values.ai.openai.apiKey }}
  ai-openai-api-key: {{ .Values.ai.openai.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.anthropic.apiKey }}
  ai-anthropic-api-key: {{ .Values.ai.anthropic.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.mistral.apiKey }}
  ai-mistral-api-key: {{ .Values.ai.mistral.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.cohere.apiKey }}
  ai-cohere-api-key: {{ .Values.ai.cohere.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.grok.apiKey }}
  ai-grok-api-key: {{ .Values.ai.grok.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.perplexity.apiKey }}
  ai-perplexity-api-key: {{ .Values.ai.perplexity.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.huggingface.apiKey }}
  ai-huggingface-api-key: {{ .Values.ai.huggingface.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.stabilityai.apiKey }}
  ai-stabilityai-api-key: {{ .Values.ai.stabilityai.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.azureopenai.apiKey }}
  ai-azureopenai-api-key: {{ .Values.ai.azureopenai.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.bedrock.accessKey }}
  ai-bedrock-access-key: {{ .Values.ai.bedrock.accessKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.bedrock.secretKey }}
  ai-bedrock-secret-key: {{ .Values.ai.bedrock.secretKey | b64enc | quote }}
  {{- end }}
  {{- end }}
  {{- if .Values.security.enabled }}
  {{- if .Values.security.auth.oidc.clientSecret }}
  auth-oidc-client-secret: {{ .Values.security.auth.oidc.clientSecret | b64enc | quote }}
  {{- end }}
  {{- end }}

