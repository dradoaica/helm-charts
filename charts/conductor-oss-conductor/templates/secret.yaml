apiVersion: v1
kind: Secret
metadata:
  name: {{ include "conductor-oss-conductor.fullname" . }}
  labels:
    {{- include "conductor-oss-conductor.labels" . | nindent 4 }}
  {{- with (include "conductor-oss-conductor.annotations" .) }}
  annotations:
    {{- . | nindent 4 }}
  {{- end }}
type: Opaque
data:
  {{- if or (hasPrefix "redis" .Values.db.type) (hasPrefix "redis" .Values.queue.type) (eq .Values.workflowExecutionLock.type "redis") }}
  redis-password: {{ .Values.redis.password | b64enc | quote }}
  {{- end }}
  {{- if eq .Values.indexing.type "elasticsearch" }}
  elasticsearch-password: {{ .Values.elasticsearch.password | b64enc | quote }}
  {{- end }}
  {{- if eq .Values.db.type "mysql" }}
  my-sql-password: {{ .Values.mySQL.password | b64enc | quote }}
  {{- end }}
  {{- if or (eq .Values.db.type "postgres") (eq .Values.workflowExecutionLock.type "postgres") (eq .Values.indexing.type "postgres") (and .Values.externalPayloadStorage.type (eq .Values.externalPayloadStorage.type "postgres")) }}
  postgres-password: {{ .Values.postgres.password | b64enc | quote }}
  {{- end }}
  {{- if eq .Values.indexing.type "opensearch" }}
  open-search-password: {{ .Values.openSearch.password | b64enc | quote }}
  {{- end }}
  {{- if .Values.amqpEventQueues.enabled }}
  amqp-password: {{ .Values.amqpEventQueues.password | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.enabled }}
  {{- if .Values.ai.openAI.apiKey }}
  ai-open-ai-api-key: {{ .Values.ai.openAI.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.anthropic.apiKey }}
  ai-anthropic-api-key: {{ .Values.ai.anthropic.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.mistral.apiKey }}
  ai-mistral-api-key: {{ .Values.ai.mistral.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.cohere.apiKey }}
  ai-cohere-api-key: {{ .Values.ai.cohere.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.grok.apiKey }}
  ai-grok-api-key: {{ .Values.ai.grok.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.perplexity.apiKey }}
  ai-perplexity-api-key: {{ .Values.ai.perplexity.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.huggingFace.apiKey }}
  ai-hugging-face-api-key: {{ .Values.ai.huggingFace.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.stabilityAI.apiKey }}
  ai-stability-ai-api-key: {{ .Values.ai.stabilityAI.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.azureOpenAI.apiKey }}
  ai-azure-open-ai-api-key: {{ .Values.ai.azureOpenAI.apiKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.bedrock.accessKey }}
  ai-bedrock-access-key: {{ .Values.ai.bedrock.accessKey | b64enc | quote }}
  {{- end }}
  {{- if .Values.ai.bedrock.secretKey }}
  ai-bedrock-secret-key: {{ .Values.ai.bedrock.secretKey | b64enc | quote }}
  {{- end }}
  {{- end }}
  {{- if .Values.security.enabled }}
  {{- if .Values.security.auth.oidc.clientSecret }}
  auth-oidc-client-secret: {{ .Values.security.auth.oidc.clientSecret | b64enc | quote }}
  {{- end }}
  {{- end }}

