global:
  # -- Global container image registry override
  imageRegistry: ""
  # -- Global pod image pull secrets
  imagePullSecrets: [ ]

# -- String to partially override the fullname template with a string (will prepend the release name)
nameOverride: ""
# -- String to fully override the fullname template with a string
fullnameOverride: ""

# -- Additional labels to add to all resources
labels: { }
# -- Additional labels to add to pods
podLabels: { }

# -- Annotations to add to all resources
annotations: { }
# -- Additional annotations to add to pods
podAnnotations: { }

# -- Extra init containers to inject into the main Pod spec
extraInitContainers: [ ]
# -- Extra sidecar containers to inject into the main Pod spec
extraContainers: [ ]
# -- Extra volumes to add to the main Pod spec
extraVolumes: [ ]
# -- Extra volume mounts to add to the main container
extraVolumeMounts: [ ]
# -- Extra environment variables to inject into the main container
extraEnvVars: [ ]
# -- Extra envFrom entries to inject into the main container
extraEnvFrom: [ ]
# -- Name of a ConfigMap with extra environment variables to inject into the main container
extraEnvVarsCM: ""
# -- Name of a Secret with extra environment variables to inject into the main container
extraEnvVarsSecret: ""

image:
  # -- Main container image registry
  registry: docker.io
  # -- Main container image repository
  repository: apacheignite/ignite
  # -- Main container image tag
  tag: ""
  # -- Main container image pull policy
  pullPolicy: IfNotPresent

serviceAccount:
  # -- Create a dedicated ServiceAccount
  create: true
  # -- Name for the ServiceAccount (autogenerated when empty)
  name: ""
  # -- Additional annotations to add to ServiceAccount
  annotations: { }

rbac:
  # -- Create RBAC items (e.g., role, role-binding)
  create: true

# -- StatefulSet pod management policy
podManagementPolicy: OrderedReady
# -- Number of old ReplicaSets to retain
revisionHistoryLimit: 10

# -- StatefulSet update strategy
updateStrategy:
  type: RollingUpdate
  rollingUpdate:
    partition: 0

# -- Pod priority class name
priorityClassName: ""

# -- Pod termination grace period
terminationGracePeriodSeconds: 60

# -- Pod security context configuration
podSecurityContext:
  # -- Enable pod security context
  enabled: true
  runAsUser: 1001
  runAsGroup: 1001
  runAsNonRoot: true
  fsGroup: 1001

# -- Container security context configuration
containerSecurityContext:
  # -- Enable container security context
  enabled: true
  runAsUser: 1001
  runAsGroup: 1001
  runAsNonRoot: true
  privileged: false
  readOnlyRootFilesystem: false
  allowPrivilegeEscalation: false
  capabilities:
    drop: [ "ALL" ]
  seccompProfile:
    type: "RuntimeDefault"

# -- Main container requests/limits with guaranteed QoS (requests = limits)
#  memory calculation: onHeapMb (JVM Heap max size)
#   + maxMetaspaceSizeMb (JVM Metaspace max size)
#   + reservedCodeCacheSizeMb (JVM ReservedCodeCache size)
#   + offHeapMb (default storage profile max size; data + indexes (basic use cases will add a 30% increase on top of data))
#   + MIN(256MB, offHeapMb) (offHeapMb < 1 GB)
#     || offHeapMb/4 (offHeapMb between 1 GB and 8 GB)
#     || 2GB (offHeapMb > 8 GB)
#       (default storage profile checkpointing buffer size)
#   + ~512MB (other overheads; e.g., thread stacks, GC, symbols, etc.)
resources:
  requests:
    cpu: "2"
    memory: 5Gi
  limits:
    cpu: "2"
    memory: 5Gi

# -- Liveness probe configuration
livenessProbe:
  # -- Enable liveness probe
  enabled: true
  httpGet:
    path: /management/v1/node/state
    port: 10300
  initialDelaySeconds: 5
  periodSeconds: 30
  timeoutSeconds: 10
  failureThreshold: 3
  successThreshold: 1

# -- Readiness probe configuration
readinessProbe:
  # -- Enable readiness probe
  enabled: true
  httpGet:
    path: /management/v1/node/state
    port: 10300
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 10
  failureThreshold: 3
  successThreshold: 1

# -- Startup probe configuration
startupProbe:
  # -- Enable startup probe
  enabled: true
  httpGet:
    path: /management/v1/node/state
    port: 10300
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 1
  failureThreshold: 15
  successThreshold: 1

# -- Lifecycle hooks configuration
lifecycleHooks: { }

container:
  # -- Container ports used by the Pod spec and as Service targetPort values
  ports:
    management: 10300
    managementSsl: 10400
    rest: 10800
    cluster: 3344

service:
  # -- Service ports used by the Service spec. targetPort fields reference container.ports.*
  ports:
    management: 10300
    managementSsl: 10400
    rest: 10800
    cluster: 3344
    jmx: 9404

persistence:
  # -- Enable persistent settings
  enabled: true
  persistentVolumeClaimRetentionPolicy:
    # -- Enable persistent volume retention policy
    enabled: false
    # -- Volume retention behavior when the replica count of the StatefulSet is reduced
    whenScaled: Retain
    # -- Volume retention behavior that applies when the StatefulSet is deleted
    whenDeleted: Retain
  # -- Persistent volume size
  size: 10Gi
  # -- Persistent volume storage class (empty string uses cluster default)
  storageClass: ""
  # -- Persistent volume access modes
  accessModes:
    - ReadWriteOnce
  # -- Labels to add to the PersistentVolumeClaim
  labels: { }
  # -- Annotations to add to the PersistentVolumeClaim
  annotations: { }

# -- Node selector
nodeSelector: { }
# -- Node tolerations
tolerations: [ ]
# -- Node affinity
affinity: { }
# -- Topology spread constraints
topologySpreadConstraints: [ ]

networkPolicy:
  # -- Create a NetworkPolicy
  create: false
  # -- Name for the NetworkPolicy (defaults to fullname when empty)
  name: ""
  # -- NetworkPolicy ingress rules
  ingress: [ ]
  # -- NetworkPolicy egress rules
  egress:
    # Allow DNS resolution
    - to:
        - ipBlock: { cidr: 0.0.0.0/0 }
      ports:
        - port: 53
          protocol: UDP
        - port: 53
          protocol: TCP
    # Allow HTTPS for JMX agent download
    - to:
        - ipBlock: { cidr: 0.0.0.0/0 }
      ports:
        - port: 443
          protocol: TCP

podDisruptionBudget:
  # -- Create a PodDisruptionBudget for high availability
  create: false
  # -- Minimum number of pods that must be available during disruptions (mutually exclusive with maxUnavailable)
  minAvailable: 1
  # -- Maximum number of pods that can be unavailable during disruptions (mutually exclusive with minAvailable)
  maxUnavailable: ""
  # Alternatively, use maxUnavailable (mutually exclusive with minAvailable)
  # maxUnavailable: "50%"

autoscaling:
  # -- Create a HorizontalPodAutoscaler
  create: false
  # -- Minimum number of replicas
  minReplicas: 1
  # -- Maximum number of replicas
  maxReplicas: 10
  # -- Target CPU utilization percentage
  targetCPUUtilizationPercentage: 80
  # -- Target memory utilization percentage
  targetMemoryUtilizationPercentage: 80

ingress:
  # -- Create an Ingress for external HTTP access
  create: false
  # -- IngressClass that will be used to implement the Ingress
  className: ""
  # -- Additional annotations for the Ingress
  annotations: { }
  # -- List of Ingress hosts with paths for REST and Management APIs
  hosts:
    - host: ignite.local
      paths:
        - path: /
          pathType: Prefix
          port: 10800
  # -- TLS configuration for Ingress
  tls: [ ]

# App specific
# -- Number of pods
replicaCount: 1

memory:
  # -- On-heap memory limit in MB. If set, JVM_MIN_MEM and JVM_MAX_MEM will be value. If not set, defaults to 1024
  onHeapMb: ""
  # -- JVM Metaspace max size in MB. If not set, defaults to 256
  maxMetaspaceSizeMb: ""
  # -- JVM ReservedCodeCache size in MB. If not set, defaults to 240
  reservedCodeCacheSizeMb: ""
  # -- JVM G1 Heap region size in MB. If not set, defaults to 1
  g1HeapRegionSizeMb: ""
  # -- Off-heap memory limit in MB. Configures the sizeBytes for the default storage profile (data + indexes)
  offHeapMb: 2048
  # -- JVM DirectMemory max size in MB (offHeapMb + checkpointing buffer size)
  maxDirectMemorySizeMb: 2560

authentication:
  # -- Enable authentication
  enabled: true
  # -- Password for the ignite user (defaults to ignite when empty)
  igniteUserPassword: ""

dataStorage:
  # -- Storage engine to use (aipersist for persistence mode, aimem for in-memory mode)
  engine: aipersist

ssl:
  clientConnector:
    # -- Enable SSL for the client connector
    enabled: false
    # -- Optional cipher suite list for the client connector
    ciphers: ""
    # -- Client authentication mode for the client connector (e.g., none, require)
    clientAuth: none
    # -- Path to the keystore used by the client connector
    keyStoreFilePath: ""
    # -- Password for the client connector keystore
    keyStorePassword: ""
    # -- Keystore type for the client connector
    keyStoreType: PKCS12
    # -- Path to the truststore used by the client connector
    trustStoreFilePath: ""
    # -- Password for the client connector truststore
    trustStorePassword: ""
    # -- Truststore type for the client connector
    trustStoreType: PKCS12
  network:
    # -- Enable SSL for the internal network interface
    enabled: false
    # -- Optional cipher suite list for the network interface
    ciphers: ""
    # -- Client authentication mode for the network interface (e.g., none, require)
    clientAuth: none
    # -- Path to the keystore used by the network interface
    keyStoreFilePath: ""
    # -- Password for the network interface keystore
    keyStorePassword: ""
    # -- Keystore type for the network interface
    keyStoreType: PKCS12
    # -- Path to the truststore used by the network interface
    trustStoreFilePath: ""
    # -- Password for the network interface truststore
    trustStorePassword: ""
    # -- Truststore type for the network interface
    trustStoreType: PKCS12
  rest:
    # -- Enable SSL for the REST endpoint
    enabled: false
    # -- Optional cipher suite list for the REST endpoint
    ciphers: ""
    # -- Client authentication mode for the REST endpoint (e.g., none, require)
    clientAuth: none
    # -- Path to the keystore used by the REST endpoint
    keyStoreFilePath: ""
    # -- Password for the REST endpoint keystore
    keyStorePassword: ""
    # -- Keystore type for the REST endpoint
    keyStoreType: PKCS12
    # -- Path to the truststore used by the REST endpoint
    trustStoreFilePath: ""
    # -- Password for the REST endpoint truststore
    trustStorePassword: ""
    # -- Truststore type for the REST endpoint
    trustStoreType: PKCS12

jmx:
  # -- Enable JMX agent sidecar for Prometheus scraping
  enabled: false
  # -- JMX agent port
  port: 9404
  agent:
    # -- JMX agent image (registry/repository:tag and pull policy)
    image:
      registry: docker.io
      repository: busybox
      tag: 1.36
      pullPolicy: IfNotPresent
    # -- JMX agent container resources
    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 100m
        memory: 128Mi
  # -- JMX exporter configuration
  config: |
    lowercaseOutputName: true
    lowercaseOutputLabelNames: true

# -- Environment variables
env:
  EXTRA_JVM_OPTS: ""

initializationJob:
  # -- Enable the cluster initialization job with topology verification and intelligent CMG sizing
  enabled: true
  # -- Resources for the cluster initialization job
  resources:
    requests:
      cpu: 500m
      memory: 2Gi
    limits:
      cpu: "1"
      memory: 2Gi
