global:
  # -- Global container image registry override
  imageRegistry: ""
  # -- Global pod image pull secrets
  imagePullSecrets: [ ]

# -- String to partially override the fullname template with a string (will prepend the release name)
nameOverride: ""
# -- String to fully override the fullname template with a string
fullnameOverride: ""

# -- Additional labels to add to all resources
labels: { }
# -- Additional labels to add to pods
podLabels: { }

# -- Annotations to add to all resources
annotations: { }
# -- Additional annotations to add to pods
podAnnotations: { }

# -- Extra init containers to inject into the main Pod spec
extraInitContainers: [ ]
# -- Extra sidecar containers to inject into the main Pod spec
extraContainers: [ ]
# -- Extra volumes to add to the main Pod spec
extraVolumes: [ ]
# -- Extra volume mounts to add to the main container
extraVolumeMounts: [ ]
# -- Extra environment variables to inject into the main container
extraEnvVars: [ ]
# -- Extra envFrom entries to inject into the main container
extraEnvFrom: [ ]
# -- Name of a ConfigMap with extra environment variables to inject into the main container
extraEnvVarsCM: ""
# -- Name of a Secret with extra environment variables to inject into the main container
extraEnvVarsSecret: ""

image:
  # -- Main container image registry
  registry: docker.io
  # -- Main container image repository
  repository: apacheignite/ignite
  # -- Main container image tag
  tag: ""
  # -- Main container image pull policy
  pullPolicy: IfNotPresent

serviceAccount:
  # -- Create a dedicated ServiceAccount
  create: true
  # -- Name for the ServiceAccount (autogenerated when empty)
  name: ""
  # -- Additional annotations to add to ServiceAccount
  annotations: { }

rbac:
  # -- Create RBAC items (e.g., role, role-binding)
  create: true

# -- StatefulSet pod management policy
podManagementPolicy: OrderedReady
# -- Number of old ReplicaSets to retain
revisionHistoryLimit: 10

# -- StatefulSet update strategy
updateStrategy:
  type: RollingUpdate
  rollingUpdate:
    partition: 0

# -- Pod priority class name
priorityClassName: ""

# -- Pod termination grace period
terminationGracePeriodSeconds: 60

# -- Pod security context configuration
podSecurityContext:
  # -- Enable pod security context
  enabled: true
  runAsUser: 1001
  runAsGroup: 1001
  runAsNonRoot: true
  fsGroup: 1001

# -- Container security context configuration
containerSecurityContext:
  # -- Enable container security context
  enabled: true
  runAsUser: 1001
  runAsGroup: 1001
  runAsNonRoot: true
  privileged: false
  readOnlyRootFilesystem: false
  allowPrivilegeEscalation: false
  capabilities:
    drop: [ "ALL" ]
  seccompProfile:
    type: "RuntimeDefault"

# -- Main container requests/limits with guaranteed QoS (requests = limits)
#  memory calculation: onHeapMb (JVM Heap max size)
#   + maxMetaspaceSizeMb (JVM Metaspace max size)
#   + reservedCodeCacheSizeMb (JVM ReservedCodeCache size)
#   + offHeapMb (default region max size; data + indexes (basic use cases will add a 30% increase on top of data))
#   + MIN(256MB, offHeapMb) (offHeapMb < 1 GB)
#     || offHeapMb/4 (offHeapMb between 1 GB and 8 GB)
#     || 2GB (offHeapMb > 8 GB)
#       (default region checkpointing buffer size)
#   + 100MB (sysMemPlc region max size)
#   + 100MB (metastoreMemPlc region max size)
#   + 100MB (TxLog region max size)
#   + 100MB (volatileDsMemPlc region max size)
#   + ~512MB (other overheads; e.g., thread stacks, GC, symbols, etc.)
resources:
  requests:
    cpu: "2"
    memory: 5Gi
  limits:
    cpu: "2"
    memory: 5Gi

# -- Liveness probe configuration
livenessProbe:
  # -- Enable liveness probe
  enabled: true
  httpGet:
    path: /ignite?cmd=version
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 30
  timeoutSeconds: 10
  failureThreshold: 3
  successThreshold: 1

# -- Readiness probe configuration
readinessProbe:
  # -- Enable readiness probe
  enabled: true
  httpGet:
    path: /ignite?cmd=probe
    port: 8080
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 10
  failureThreshold: 3
  successThreshold: 1

# -- Startup probe configuration
startupProbe:
  # -- Enable startup probe
  enabled: true
  httpGet:
    path: /ignite?cmd=version
    port: 8080
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 1
  failureThreshold: 15
  successThreshold: 1

# -- Lifecycle hooks configuration
lifecycleHooks: { }

container:
  # -- Container ports used by the Pod spec and as Service targetPort values
  ports:
    jdbc: 11211
    spiCommunication: 47100
    spiDiscovery: 47500
    jmx: 49112
    sql: 10800
    rest: 8080
    thinClients: 10900

service:
  # -- Service ports used by the Service spec. targetPort fields reference container.ports.*
  ports:
    jdbc: 11211
    spiCommunication: 47100
    spiDiscovery: 47500
    jmx: 49112
    sql: 10800
    rest: 8080
    thinClients: 10900

persistence:
  # -- Enable persistent settings - both storage and WAL
  enabled: true
  persistentVolumeClaimRetentionPolicy:
    # -- Enable persistent volume retention policy
    enabled: false
    # -- Volume retention behavior when the replica count of the StatefulSet is reduced
    whenScaled: Retain
    # -- Volume retention behavior that applies when the StatefulSet is deleted
    whenDeleted: Retain
  # -- Volume where data and indexes are to be persisted
  storageVolume:
    # -- Persistent volume size for storage
    size: 8Gi
    # -- Persistent volume storage class for storage (empty string uses cluster default)
    storageClass: ""
    # -- Persistent volume access modes
    accessModes:
      - ReadWriteOnce
    # -- Labels to add to the storage PersistentVolumeClaim
    labels: { }
    # -- Annotations to add to the storage PersistentVolumeClaim
    annotations: { }
  # -- Volume where WAL is persisted
  walVolume:
    # -- Persistent volume size for WAL
    size: 8Gi
    # -- Persistent volume storage class for WAL (empty string uses cluster default)
    storageClass: ""
    # -- Persistent volume access modes
    accessModes:
      - ReadWriteOnce
    # -- Labels to add to the WAL PersistentVolumeClaim
    labels: { }
    # -- Annotations to add to the WAL PersistentVolumeClaim
    annotations: { }

# -- Node selector
nodeSelector: { }
# -- Node tolerations
tolerations: [ ]
# -- Node affinity
affinity: { }
# -- Topology spread constraints
topologySpreadConstraints: [ ]

networkPolicy:
  # -- Create a NetworkPolicy
  create: false
  # -- Name for the NetworkPolicy (defaults to fullname when empty)
  name: ""
  # -- NetworkPolicy ingress rules
  ingress: [ ]
  # -- NetworkPolicy egress rules
  egress:
    # Allow DNS resolution
    - to:
        - ipBlock: { cidr: 0.0.0.0/0 }
      ports:
        - port: 53
          protocol: UDP
        - port: 53
          protocol: TCP

podDisruptionBudget:
  # -- Create a PodDisruptionBudget for high availability
  create: false
  # -- Minimum number of pods that must be available during disruptions (mutually exclusive with maxUnavailable)
  minAvailable: 1
  # -- Maximum number of pods that can be unavailable during disruptions (mutually exclusive with minAvailable)
  maxUnavailable: ""
  # Alternatively, use maxUnavailable (mutually exclusive with minAvailable)
  # maxUnavailable: "50%"

autoscaling:
  # -- Create a HorizontalPodAutoscaler
  create: false
  # -- Minimum number of replicas
  minReplicas: 1
  # -- Maximum number of replicas
  maxReplicas: 10
  # -- Target CPU utilization percentage
  targetCPUUtilizationPercentage: 80
  # -- Target memory utilization percentage
  targetMemoryUtilizationPercentage: 80

ingress:
  # -- Create an Ingress for external HTTP access to REST API
  create: false
  # -- IngressClass that will be used to implement the Ingress
  className: ""
  # -- Additional annotations for the Ingress
  annotations: { }
  # -- List of Ingress hosts with paths configuration
  hosts:
    - host: ignite.local
      paths:
        - path: /
          pathType: Prefix
          port: 8080
  # -- TLS configuration for Ingress
  tls: [ ]

# App specific
# -- Number of pods
replicaCount: 1

memory:
  # -- On-heap memory limit in MB. If set, -Xms and -Xmx will be value. If not set, defaults to 1024
  onHeapMb: ""
  # -- JVM Metaspace max size in MB. If not set, defaults to 256
  maxMetaspaceSizeMb: ""
  # -- JVM ReservedCodeCache size in MB. If not set, defaults to 240
  reservedCodeCacheSizeMb: ""
  # -- JVM G1 Heap region size in MB. If not set, defaults to 1
  g1HeapRegionSizeMb: ""
  # -- Off-heap memory limit in MB. Configures the maxSize for org.apache.ignite.configuration.DataStorageConfiguration bean (data + indexes)
  offHeapMb: 2048
  # -- JVM DirectMemory max size in MB (offHeapMb + checkpointing buffer size + other system regions total size)
  maxDirectMemorySizeMb: 2960

# -- Extra beans (e.g., com.mysql.cj.jdbc.MysqlDataSource)
extraBeans: |-

authentication:
  # -- Enable authentication
  enabled: true
  # -- Password for the ignite user (defaults to ignite when empty)
  igniteUserPassword: ""

# -- Enable the Ignite's [Zero Deployment](https://ignite.apache.org/docs/ignite2/latest/code-deployment/peer-class-loading.html#enabling-peer-class-loading)
peerClassLoadingEnabled: false

# -- Timeouts
timeouts:
  # -- Failure detection timeout in milliseconds
  failureDetectionTimeout: 30000
  # -- Client failure detection timeout in milliseconds
  clientFailureDetectionTimeout: 60000
  # -- Network timeout in milliseconds
  networkTimeout: 10000

# -- Thread pools
threadPools:
  # -- Public thread pool size
  publicThreadPoolSize: ""
  # -- System thread pool size
  systemThreadPoolSize: ""
  # -- Query thread pool size
  queryThreadPoolSize: ""
  # -- Service thread pool size
  serviceThreadPoolSize: ""
  # -- Striped thread pool size
  stripedPoolSize: ""
  # -- Data streamer thread pool size
  dataStreamerThreadPoolSize: ""

# -- User attributes
userAttributes: |-

# -- Binary configuration
binaryConfiguration: |-

# -- Cache configuration
cacheConfiguration: |-

# -- Cache key configuration
cacheKeyConfiguration: |-

# -- Client connector configuration
clientConnector:
  # -- Extra configuration for org.apache.ignite.configuration.ClientConnectorConfiguration bean
  extraConfiguration: |-

# -- Data storage configuration
dataStorage:
  # -- Off-heap eviction policy for in-memory mode (e.g., RANDOM_LRU)
  pageEvictionMode: ""
  # -- Extra configuration for org.apache.ignite.configuration.DataStorageConfiguration bean
  extraConfiguration: |-

# -- Executor configuration
executorConfiguration: |-

# -- Memory configuration
memoryConfiguration: |-

# -- Service configuration
serviceConfiguration: |-

# -- SQL configuration
sqlConfiguration: |-

# -- Transaction configuration
transactionConfiguration: |-

# -- SSL configuration
ssl:
  # -- Enable SSL
  enabled: false
  # -- Key manager algorithm that will be used to create a key manager
  keyAlgorithm: SunX509
  # -- Path to the keystore that stores Ignite node certificates
  keyStoreFilePath: ""
  # -- Password used to access the keystore defined above
  keyStorePassword: ""
  # -- Key store type
  keyStoreType: JKS
  # -- Path to the truststore used to validate connecting clients
  trustStoreFilePath: ""
  # -- Password used to access the truststore defined above
  trustStorePassword: ""
  # -- Trust store type
  trustStoreType: JKS
  # -- Protocol
  protocol: TLSv1.2
  # -- SSL client connector configuration
  clientConnector:
    # -- Enable SSL for the client connector
    enabled: false
    # -- Client authentication for the client connector
    clientAuth: false

# -- Collision SPI
collisionSpi: |-

# -- Communication SPI
communicationSpi: |-
  <bean class="org.apache.ignite.spi.communication.tcp.TcpCommunicationSpi">
      <property name="messageQueueLimit" value="2048"/>
      <property name="slowClientQueueLimit" value="2048"/>
      <property name="socketWriteTimeout" value="5000"/>
      <property name="connectTimeout" value="10000"/>
  </bean>

# -- Deployment SPI
deploymentSpi: |-

# -- Encryption SPI
encryptionSpi: |-

# -- Failover SPI
failoverSpi: |-

# -- Load balancing SPI
loadBalancingSpi: |-

metrics:
  # -- Enable metrics
  enabled: false

tracing:
  # -- Enable tracing
  enabled: false

# -- Environment variables
env:
  EXTRA_JVM_OPTS: ""
  EXTRA_OPTION_LIBS: ""

activationJob:
  # -- Enable the cluster activation job
  enabled: true
  # -- Image for the cluster activation job
  image:
    registry: docker.io
    repository: curlimages/curl
    tag: 8.17.0
    pullPolicy: IfNotPresent
  # -- Resources for the cluster activation job
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 100m
      memory: 128Mi
